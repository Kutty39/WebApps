package com.blbz.webapageapp.controller;
/*
 * Created by	: Tamilselvan S
 * Created on	: 5/12/2019
 * purpose		: to navigate between pages
 */
import java.io.IOException;

import org.apache.log4j.BasicConfigurator;
import org.apache.log4j.Logger;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/switchpage")
public class PageNave extends HttpServlet {
	private static final long serialVersionUID = 1L;
	private final static Logger logger=Logger.getLogger(PageNave.class);
	@Override
	protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
		BasicConfigurator.configure();
		System.err.println("nav - DoGet - Entered");
		String page = "";
		if (req.getParameter("page") != null) {
			page = req.getParameter("page");
		} else if (req.getAttribute("page") != null) {
			page = (String) req.getAttribute("page");
		}
		System.err.println(page);
		if (page.equals("login")) {
			req.getRequestDispatcher("login.jsp").forward(req, resp);
		} else if (page.equals("register")) {
			req.getRequestDispatcher("register.jsp").forward(req, resp);
		}else if(page.equals("home")) {
			req.getRequestDispatcher("home.jsp").forward(req, resp);
		}else if(page.equals("userprof")) {
			req.getRequestDispatcher("profilepage.jsp").forward(req, resp);
		}else if(page.equals("logout")) {
			req.getRequestDispatcher("logout.jsp").forward(req, resp);
		}
		System.err.println("nav - DoGet - Exit");
	}

	@Override
	protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
		logger.info("nav - DoPost - Entered");
		doGet(req, resp);
		logger.info("nav - DoPost - Exit");
	}

}
